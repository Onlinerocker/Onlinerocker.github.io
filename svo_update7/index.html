<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.25.3"/><link as="script" rel="preload" href="/webpack-runtime-3d53b4c037cccfa6e2b3.js"/><link as="script" rel="preload" href="/framework-aad5b025b9e173e1e8c7.js"/><link as="script" rel="preload" href="/app-d49afff437e1dfef4477.js"/><link as="script" rel="preload" href="/commons-a30d9b8c89d158d4c38c.js"/><link as="script" rel="preload" href="/component---src-pages-svo-update-7-js-d1cfc17bad37dbf9f06e.js"/><link as="fetch" rel="preload" href="/page-data\svo_update7\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"/><nav class="navbar navbar-expand navbar-dark bg-dark"><span class="navbar-brand"><img src="/leaf.png" width="42" height="30" class="d-inline-block align-top" alt=""/></span><span class="navbar-brand">Gabe Caldwell</span><div class="mr-auto navbar-nav"><div class="nav-item"><a href="/" data-rb-event-key="/" class="nav-link">Projects</a></div><div class="nav-item"><a href="/resume" data-rb-event-key="/resume" class="nav-link">Resume</a></div><div class="nav-item"><a href="/blog" data-rb-event-key="/blog" class="nav-link">Blog</a></div><div class="nav-item"><a href="/about" data-rb-event-key="/about" class="nav-link">About</a></div></div></nav><div class="container-fluid"><br/><div style="max-width:1200px" class="card"><div class="card-header" style="background:#EEEEEE">7/29/2022</div><div class="card-body"><div class="card-title h5"><h2>SVO Ray Tracer Update #7 - Explosion Effect</h2></div><a href="https://github.com/Onlinerocker/SVO">Project&#x27;s GitHub Repo</a><br/><br/><div class="card-title h5">Adding an Explosion Effect</div>To add some extra flare to the project I created an explosion effect that makes deleting voxels a bit more fun. It works by rendering a sphere at the location of the sphere deletion. The radius of this sphere will grow to match the radius of the sphere of deletion. Animation on the sphere is achieved by multiplying the sphere’s radius by a time modulated sin wave. This causes the sphere to grow from radius zero, to the radius of the deletion, then back down to zero. The voxels are actually deleted when the sphere is at its max radius. This means no voxels appear to be deleted until the sphere starts shrinking, creating the illusion that the explosion effect has destroyed voxels.<br/><br/>I pass the explosion position, max radius, and current radius to the shader via constant buffer. Currently I only support one explosion. More could be supported by adding additional variables to the constant buffer and iterating over them.<br/><br/><div class="card-title h5">Let There be Light!</div>It wouldn’t be right if an explosion didn’t light up the area around it, so I decided to have the explosion act as a point light with some attenuation. This way, as the explosion grows and shrinks, the lighting effect becomes more/less intense respectively:<br/><br/><p class="card-text" style="font-family:monospace;color:white;background:#333333;padding:10px">float3 toEx = Explosion.xyz – indexPos; //vector from sample pos to the explosion center<br/>float toExLen2 = dot(toEx, toEx); //length of above vector squared<br/><br/>//below, curExRad is the current explosion radius<br/>float att = clamp((curExRad * curExRad)/toExLen2, 0, 1) * 10.0f; //attenuation * intensity<br/><br/>voxColor += diffColor * ((clamp(dot(voxNorm, normalize(toEx)), 0, 1)) * 1.5) * att;<br/></p><br/><div class="card-title h5">Rendering the Explosion on the Octree Visualization</div>I wanted to render the cross section of the deletion sphere and the octree root when in octree visualization mode. This allowed the octree visualization to clearly showcase which voxels were about to be deleted by the explosion. I did this using the signed distance function for a sphere. This equation is intuitive:<br/><br/><i>sphere_center -  sample_position -  sphere_radius = sample_pos_distance_from_surface</i><br/><br/>When this equation returns less zero the sample position is inside the sphere. After I applied this equation to the sample position for leaf voxels I could determine which leaf voxels were going to be deleted by the explosion. I could then render these to-be-deleted voxels in a different color, clearly communicating their unfortunate fate &gt;:D<br/><br/>Below is a video demo:<br/><iframe width="560" height="315" src="https://www.youtube.com/embed/QA0nciuEVp4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe></div></div></div><br/></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/svo_update7/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a561c8ea411b32d07864.js"],"app":["/app-d49afff437e1dfef4477.js"],"component---src-pages-about-js":["/component---src-pages-about-js-50e00aef196e59bc65b5.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-84c0b4aee1551b5173e0.js"],"component---src-pages-cel-shade-js":["/component---src-pages-cel-shade-js-ca85c40fd0dc961a9afb.js"],"component---src-pages-fiea-js":["/component---src-pages-fiea-js-3e5a85163a24ccbb3430.js"],"component---src-pages-index-js":["/component---src-pages-index-js-444d28301b6c2db48fbd.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-36d2464057521d54935f.js"],"component---src-pages-snow-effect-js":["/component---src-pages-snow-effect-js-3e12d86bd376e5256fa1.js"],"component---src-pages-svo-index-js":["/component---src-pages-svo-index-js-c4a36c4aadef1763f1bc.js"],"component---src-pages-svo-update-1-js":["/component---src-pages-svo-update-1-js-0723e46ca5eabec566ec.js"],"component---src-pages-svo-update-2-js":["/component---src-pages-svo-update-2-js-9974a81af8a7dfb78926.js"],"component---src-pages-svo-update-3-js":["/component---src-pages-svo-update-3-js-611c27f570b6cf21ce40.js"],"component---src-pages-svo-update-4-js":["/component---src-pages-svo-update-4-js-acb33032709bbbe4d10c.js"],"component---src-pages-svo-update-5-js":["/component---src-pages-svo-update-5-js-fcc98e07cae929786ffb.js"],"component---src-pages-svo-update-6-js":["/component---src-pages-svo-update-6-js-6186cec2da3807c317a1.js"],"component---src-pages-svo-update-7-js":["/component---src-pages-svo-update-7-js-d1cfc17bad37dbf9f06e.js"],"component---src-pages-tree-gen-js":["/component---src-pages-tree-gen-js-46604832a1ded72290bc.js"],"component---src-pages-ultrastack-js":["/component---src-pages-ultrastack-js-8d1b2327b1d8c768ad31.js"]};/*]]>*/</script><script src="/polyfill-a561c8ea411b32d07864.js" nomodule=""></script><script src="/component---src-pages-svo-update-7-js-d1cfc17bad37dbf9f06e.js" async=""></script><script src="/commons-a30d9b8c89d158d4c38c.js" async=""></script><script src="/app-d49afff437e1dfef4477.js" async=""></script><script src="/framework-aad5b025b9e173e1e8c7.js" async=""></script><script src="/webpack-runtime-3d53b4c037cccfa6e2b3.js" async=""></script></body></html>